<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Mutation Testing â€¢ muttest</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
<link rel="icon" type="â€image/svg+xmlâ€" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<script src="lightswitch.js"></script><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Mutation Testing">
<meta name="description" content="Measure quality of your tests. muttest introduces small changes (mutations) to your code and runs your tests to check if they catch the changes. If they do, your tests are good. If not, your assertions are not specific enough. muttest gives you percent score of how often your tests catch the changes.">
<meta property="og:description" content="Measure quality of your tests. muttest introduces small changes (mutations) to your code and runs your tests to check if they catch the changes. If they do, your tests are good. If not, your assertions are not specific enough. muttest gives you percent score of how often your tests catch the changes.">
<meta property="og:image" content="https://jakubsob.github.io/muttest/logo.png">
<!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-N7MW34VJS3"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-N7MW34VJS3');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">muttest</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/how-it-works.html">How it works</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="muttest-">muttest <a class="anchor" aria-label="anchor" href="#muttest-"></a>
</h1>
</div>
<!-- badges: start -->

<p>Measure quality of your tests with <strong>{muttest}</strong>.</p>
<p><a href="https://github.com/r-lib/covr" class="external-link">covr</a> tells you how much of your code is executed by tests, but it tells you nothing about the quality of those tests.</p>
<p>In fact, you can have tests with zero assertions and still get 100% coverage. That can give a false sense of security. Mutation testing addresses this gap.</p>
<p>It works like this:</p>
<ul>
<li>Define a set of code changes (mutations).</li>
<li>Run your test suite against mutated versions of your source code.</li>
<li>Measure how often the mutations are caught (i.e., cause test failures).</li>
</ul>
<p>This reveals whether your tests are asserting the right things:</p>
<ul>
<li>0% score â†’ Your tests pass no matter what changes. Your assertions are weak.</li>
<li>100% score â†’ Every mutation triggers a test failure. Your tests are robust.</li>
</ul>
<p>{muttest} not only gives you the score, but it also tells you tests for which files require improved assertions.</p>
</div>
<div class="section level1">
<h1 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h1>
<p>Given our codebase is:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' R/calculate.R</span></span>
<span><span class="va">calculate</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="op">(</span><span class="va">x</span> <span class="op">+</span> <span class="va">y</span><span class="op">)</span> <span class="op">*</span> <span class="fl">0</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>And our tests are:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' tests/testthat/test_calculate.R</span></span>
<span><span class="fu">test_that</span><span class="op">(</span><span class="st">"calculate returns a numeric"</span>, <span class="op">{</span></span>
<span>  <span class="fu">expect_true</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">is.numeric</a></span><span class="op">(</span><span class="fu">calculate</span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="co"># âŒ This assertion doesn't kill mutants</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">test_that</span><span class="op">(</span><span class="st">"calculate always returns 0"</span>, <span class="op">{</span></span>
<span>  <span class="fu">expect_equal</span><span class="op">(</span><span class="fu">calculate</span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fl">0</span><span class="op">)</span> <span class="co"># âœ… This assertion only kills "*" -&gt; "/" mutant</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>When running <code><a href="reference/muttest.html">muttest::muttest()</a></code> weâ€™ll get a report of the mutation score:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plan</span> <span class="op">&lt;-</span> <span class="fu">muttest</span><span class="fu">::</span><span class="fu"><a href="reference/plan.html">plan</a></span><span class="op">(</span></span>
<span>  source_files <span class="op">=</span> <span class="st">"R/calculate.R"</span>,</span>
<span>  mutators <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu">muttest</span><span class="fu">::</span><span class="fu"><a href="reference/operator.html">operator</a></span><span class="op">(</span><span class="st">"+"</span>, <span class="st">"-"</span><span class="op">)</span>,</span>
<span>    <span class="fu">muttest</span><span class="fu">::</span><span class="fu"><a href="reference/operator.html">operator</a></span><span class="op">(</span><span class="st">"*"</span>, <span class="st">"/"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">muttest</span><span class="fu">::</span><span class="fu"><a href="reference/muttest.html">muttest</a></span><span class="op">(</span><span class="va">plan</span><span class="op">)</span></span>
<span><span class="co">#&gt; â„¹ Mutation Testing</span></span>
<span><span class="co">#&gt;   |   K |   S |   E |   T |   % | Mutator  | File</span></span>
<span><span class="co">#&gt; x |   0 |   1 |   0 |   1 |   0 | + â†’ -    | calculate.R</span></span>
<span><span class="co">#&gt; âœ” |   1 |   1 |   0 |   2 |  50 | * â†’ /    | calculate.R</span></span>
<span><span class="co">#&gt; â”€â”€ Mutation Testing Results â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span>
<span><span class="co">#&gt; [ KILLED 1 | SURVIVED 1 | ERRORS 0 | TOTAL 2 | SCORE 50.0% ]</span></span></code></pre></div>
<p>The mutation score is: <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Mutation Score</mtext><mo>=</mo><mfrac><mtext mathvariant="normal">Killed Mutants</mtext><mtext mathvariant="normal">Total Mutants</mtext></mfrac><mo>Ã—</mo><mn>100</mn><mi>%</mi></mrow><annotation encoding="application/x-tex">\text{Mutation Score} = \frac{\text{Killed Mutants}}{\text{Total Mutants}} \times 100\%</annotation></semantics></math>, where a Mutant is defined as variant of the original code that is used to test the robustness of the test suite.</p>
<p>In the example there were 2 mutants of the code:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' R/calculate.R</span></span>
<span><span class="va">calculate</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="op">(</span><span class="va">x</span> <span class="op">-</span> <span class="va">y</span><span class="op">)</span> <span class="op">*</span> <span class="fl">0</span> <span class="co"># mutant 1: "+" -&gt; "-"</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' R/calculate.R</span></span>
<span><span class="va">calculate</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="op">(</span><span class="va">x</span> <span class="op">+</span> <span class="va">y</span><span class="op">)</span> <span class="op">/</span> <span class="fl">0</span> <span class="co"># mutant 2: "*" -&gt; "/"</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Tests are run against both variants of the code.</p>
<p>The first test run against the first mutant will pass, because the result is still 0. The second test run against the second mutant will fail, because the result is Inf.</p>
<p>The second test will pass against both mutants, because the result is still numeric.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' tests/testthat/test_calculate.R</span></span>
<span><span class="fu">test_that</span><span class="op">(</span><span class="st">"calculate always returns 0"</span>, <span class="op">{</span></span>
<span>  <span class="co"># ğŸŸ¢ This test doesn't kill "+" -&gt; "-" operator mutant: (2 - 2) * 0 = 0</span></span>
<span>  <span class="co"># âŒ This test kills "*" -&gt; "/" operator mutant: (2 + 2) / 0 = Inf</span></span>
<span>  <span class="fu">expect_equal</span><span class="op">(</span><span class="fu">calculate</span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fl">0</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">test_that</span><span class="op">(</span><span class="st">"calculate returns a numeric"</span>, <span class="op">{</span></span>
<span>  <span class="co"># ğŸŸ¢ This test doesn't kill "+" -&gt; "-", (2 - 2) * 0 = 0, is numeric</span></span>
<span>  <span class="co"># ğŸŸ¢ This test doesn't kill "*" -&gt; "/", (2 + 2) / 0 = Inf, is numeric</span></span>
<span>  <span class="fu">expect_true</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">is.numeric</a></span><span class="op">(</span><span class="fu">calculate</span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>We have killed 1 mutant out of 2, so the mutation score is 50%.</p>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=muttest" class="external-link">View on CRAN</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing muttest</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Jakub Sobolewski <br><small class="roles"> Author, maintainer </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=muttest" class="external-link"><img src="https://www.r-pkg.org/badges/version/muttest" alt="CRAN status"></a></li>
<li><a href="https://github.com/jakubsob/muttest/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/jakubsob/muttest/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/jakubsob/muttest" class="external-link"><img src="https://codecov.io/gh/jakubsob/muttest/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://github.com/jakubsob/muttest/actions/workflows/test-acceptance.yaml" class="external-link"><img src="https://img.shields.io/github/actions/workflow/status/jakubsob/muttest/test-acceptance.yaml?branch=main&amp;label=cucumber&amp;logo=cucumber&amp;color=23D96C&amp;labelColor=0f2a13" alt="cucumber"></a></li>
<li><a href="https://github.com/jakubsob/muttest/actions/workflows/test-mutation.yaml" class="external-link"><img src="https://img.shields.io/endpoint?url=https://raw.githubusercontent.com/jakubsob/muttest/badges/.badges/muttest.json" alt="muttest"></a></li>
<li><a href="https://cran.r-project.org/package=muttest" class="external-link"><img src="http://cranlogs.r-pkg.org/badges/grand-total/muttest" alt="Grand total"></a></li>
<li><a href="https://cran.r-project.org/package=muttest" class="external-link"><img src="http://cranlogs.r-pkg.org/badges/last-month/muttest" alt="Last month"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jakub Sobolewski.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
